// Prisma schema
// Database: MySQL (change provider/url if you use PostgreSQL)

datasource db {
  provider = "postgresql"
  url       = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Vendeur {
  id           Int       @id @default(autoincrement())
  nom          String
  prenom       String
  email        String    @unique
  passwordHash String
  dateDebut    DateTime
  dateFin      DateTime?
  actif        Boolean   @default(true)

  livreurs     Livreur[]

  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
}

model Livreur {
  id              Int               @id @default(autoincrement())
  nom             String
  prenom          String
  numeroWhatsApp  String

  vendeurId       Int
  vendeur         Vendeur           @relation(fields: [vendeurId], references: [id], onDelete: Cascade)

  lienLocalisation LienLocalisation?

  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt
}

model LienLocalisation {
  id           Int      @id @default(autoincrement())
  url          String   @unique

  livreurId    Int      @unique
  livreur      Livreur  @relation(fields: [livreurId], references: [id], onDelete: Cascade)

  dateCreation DateTime @default(now())
  clicks       Int      @default(0)
}

// Admin user for backend authentication
model Admin {
  id           Int      @id @default(autoincrement())
  email        String   @unique
  passwordHash String

  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt
}
